(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{59:function(e,n,t){"use strict";t.r(n);var r,c,a,o,i=t(0),u=t.n(i),l=t(17),s=t.n(l),f=t(4),d=t(13),j=t(2),b=t(16),p=t(7),O=t(8),m="@@tic-tac-toe",y="".concat(m,":RESET_GAME"),h="".concat(m,":FILL_SQUARE"),v="".concat(m,":JOIN_GAME"),x="".concat(m,":JOIN_ROOM"),w="".concat(m,":SYNC_GAME_STATE"),S=function(e){return{type:v,payload:{player:e}}},g=function(e){return{type:w,payload:{state:e}}},N=t(1),E=O.a.div(r||(r=Object(p.a)(["\n    width: ",";\n    height: ",";\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n\n    font-size: 2.5em;\n\n    border: solid 1px black;\n\n    /* guarantee no text selection  */\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently */\n"])),(function(e){var n=e.squareSize;return"".concat(n-2,"px")}),(function(e){var n=e.squareSize;return"".concat(n-2,"px")})),T=function(e){var n=e.children,t=e.squareSize,r=e.onClick;return Object(N.jsx)(E,{squareSize:t,onClick:r,children:n})},_=O.a.div(c||(c=Object(p.a)(["\n    height: ",";\n    width: ",";\n\n    display: flex;\n    flex-direction: row;\n    align-items: space-around;\n    justify-content: center;\n    flex-wrap: wrap;\n"])),(function(e){var n=e.boardSize;return"".concat(n,"px")}),(function(e){var n=e.boardSize;return"".concat(n,"px")})),k=function(){var e=Object(f.c)((function(e){return e.ticTacToe})).board,n=Object(f.c)((function(e){return e.identification})).userName,t=Object(f.b)();return Object(N.jsx)(_,{boardSize:300,children:e.map((function(e,r){return e.map((function(e,c){return Object(N.jsx)(T,{squareSize:100,onClick:function(){t(function(e){var n=e.row,t=e.column,r=e.player;return{type:h,payload:{row:n,column:t,player:r}}}({column:c,row:r,player:n}))},children:e},String(r)+String(c))}))}))})},I="@@identification:SET_IDENTIFICATION",z="@@identification:SET_ROOM",X=function(e){return{type:z,payload:{room:e}}},C=O.a.div(a||(a=Object(p.a)(["\n  width: 95vw;\n  height: 95vh;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  font-family: sans-serif;\n"]))),M="Click a square",A=function(){var e=Object(f.c)((function(e){return e.ticTacToe})),n=e.winner,t=e.plays,r=e.maxPlays,c=e.X,a=e.O,o=Object(f.c)((function(e){return e.identification})).userName,u=Object(j.f)().roomName,l=Object(f.b)(),s=Object(i.useState)(M),p=Object(b.a)(s,2),O=p[0],m=p[1];return Object(i.useEffect)((function(){return m(n?function(e){return"Winner: ".concat(e)}(n):t>=r?"No winner":M)}),[n,t,r]),Object(i.useEffect)((function(){l(X(u)),l(function(e){return{type:x,payload:{roomName:e}}}(u))}),[]),Object(N.jsxs)(C,{children:[Object(N.jsx)("p",{children:o?"Your user name: ".concat(o):"You're viewing the game as a guest"}),Object(N.jsxs)("p",{children:["Player X:"," ",c]}),Object(N.jsxs)("p",{children:["Player O:"," ",a]}),Object(N.jsx)(k,{}),Object(N.jsx)("p",{children:O}),Object(N.jsx)("button",{type:"button",onClick:function(){return l({type:y,payload:{boardSize:e}});var e},children:"Reset Game"}),Object(N.jsx)(d.b,{to:"/",children:Object(N.jsx)("p",{children:"Menu"})})]})},R=O.a.div(o||(o=Object(p.a)(["\n  width: 95vw;\n  height: 95vh;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  font-family: sans-serif;\n"]))),q=function(){var e=Object(f.c)((function(e){return e.identification})),n=e.userName,t=e.room,r=Object(f.b)(),c=Object(i.useCallback)((function(e){t||e.preventDefault()}),[t]);return Object(N.jsxs)(R,{children:[Object(N.jsx)("div",{children:Object(N.jsxs)("label",{htmlFor:"userName",children:[Object(N.jsx)("p",{children:"Type in your username:"}),Object(N.jsx)("input",{name:"userName",onInput:function(e){return r(function(e){return{type:I,payload:{userName:e}}}(e.target.value))},value:n})]})}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("label",{htmlFor:"roomName",children:[Object(N.jsx)("p",{children:"Type in the room name:"}),Object(N.jsx)("input",{name:"roomName",onInput:function(e){return r(X(e.target.value))},value:t})]}),Object(N.jsx)(d.b,{to:"/room/".concat(t),onClick:c,children:Object(N.jsx)("p",{children:"Join room"})})]})]})},D=function(){return Object(N.jsx)(d.a,{children:Object(N.jsxs)(j.c,{children:[Object(N.jsx)(j.a,{path:"/room/:roomName",children:Object(N.jsx)(A,{})}),Object(N.jsx)(j.a,{path:"/",children:Object(N.jsx)(q,{})})]})})},F=t(10),J=t(14),L=t(19),V=t(3),G=Object.freeze(["X","O"]),P=function(){var e=Math.pow(3,2),n=new Array(3).fill([]).map((function(){return new Array(3).fill("")})),t=Object(b.a)(G,1)[0];return{id:(new Date).getTime(),X:null,O:null,winner:null,roomName:null,maxPlays:e,board:n,nextSymbol:t,plays:0}},U=function(e){var n=Object(J.a)(e),t=B(e),r=H(e),c=[].concat(Object(J.a)(n),Object(J.a)(t),Object(J.a)(r));return Y(c)},Y=function(e){var n;return null===(n=e.find((function(e){var n=Object(b.a)(e,1)[0];return e.every((function(e){return""!==e&&e===n}))})))||void 0===n?void 0:n[0]},B=function(e){return e.reduce((function(e,n){return[0,1,2].map((function(t){return[].concat(Object(J.a)(e[t]),[n[t]])}))}),[[],[],[]])},H=function(e){return[K(e),Q(e)]},K=function(e){return e.map((function(e,n){return e.find((function(e,t){return t===n}))}))},Q=function(e){return e.map((function(n,t){return n.find((function(n,r){return r+t===e.length-1}))}))},W=function(e){var n=e.state,t=e.row,r=e.column,c=e.player===Z(n),a=!n.board[t][r],o=!n.winner;return c&&a&&o},Z=function(e){return $({state:e,symbol:e.nextSymbol})},$=function(e){return e.state[e.symbol]||null},ee=function(e){var n=e.state,t=e.row,r=e.column;return n.board.map((function(e,c){return c!==t?e:e.map((function(e,t){return t===r?n.nextSymbol:e}))}))},ne=function(e){var n=te(e),t=G.length;return G[n%t]},te=function(e){return e.plays+1},re=function(){return P()},ce=function(e,n){var t=n.payload;return function(e){var n=e.state,t=e.row,r=e.column,c=e.player;if(!W({state:n,row:t,column:r,player:c}))return n;var a=ee({state:n,row:t,column:r}),o=U(a),i=$({state:n,symbol:o});return Object(V.a)(Object(V.a)({},n),{},{board:a,nextSymbol:ne(n),plays:te(n),winner:i})}({state:e,row:t.row,column:t.column,player:t.player})},ae=function(e,n){return function(e){var n=e.state,t=e.player,r=!!n.X;if(n.X&&n.O)return n;if(r&&n.X===t)return n;var c=r?"O":"X";return Object(V.a)(Object(V.a)({},n),{},Object(L.a)({},c,t))}({state:e,player:n.payload.player})},oe=function(e,n){return function(e){var n=e.state,t=e.roomName;return Object(V.a)(Object(V.a)({},n),{},{roomName:t})}({state:e,roomName:n.payload.roomName})},ie=function(e,n){return n.payload.state},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case y:return re();case h:return ce(e,n);case v:return ae(e,n);case x:return oe(e,n);case w:return ie(0,n);default:return e}},le=function(e,n){var t=n.payload.userName;return Object(V.a)(Object(V.a)({},e),{},{userName:t})},se=function(e,n){var t=n.payload.room;return Object(V.a)(Object(V.a)({},e),{},{room:t})},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case I:return le(e,n);case z:return se(e,n);default:return e}},de=Object(F.c)({ticTacToe:ue,identification:fe}),je=t(26),be=t.n(je),pe=t(34),Oe=t(22),me=new(t.n(Oe).a)("wss://ws.nundb.org","tic-tac-toe","tic-tac-toe12i3ukjsd"),ye=new RegExp("^".concat(m)),he=function(e){return function(n){return function(){var t=Object(pe.a)(be.a.mark((function t(r){var c,a,o,i;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(r),c=e.getState().ticTacToe.id,a=e.getState().identification.room,r.type!==x){t.next=17;break}return t.prev=4,t.next=7,me.getValue(a);case 7:o=t.sent,e.dispatch(g(o.ticTacToe)),e.dispatch(S(e.getState().identification.userName)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),e.dispatch(S(e.getState().identification.userName));case 15:return me.watch("lastEvent-".concat(a),(function(n){return n.playerId!==c&&(ye.test(n.value.type)&&e.dispatch(n.value),!0)})),t.abrupt("return");case 17:ye.test(r.type)&&!r.playerId&&(i=Object(V.a)(Object(V.a)({},r),{},{playerId:c}),me.setValue("lastEvent-".concat(a),i),me.setValue(e.getState().identification.room,e.getState()));case 18:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}()}},ve=function(){return window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.initialState,t=Object(F.e)(de,n,Object(F.d)(Object(F.a)(he),ve()));return t}();s.a.render(Object(N.jsx)(u.a.StrictMode,{children:Object(N.jsx)(f.a,{store:xe,children:Object(N.jsx)(D,{})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.9f047c13.chunk.js.map